\hypertarget{buffer_8h_source}{}\doxysection{buffer.\+h}
\label{buffer_8h_source}\index{susci/synchronization/buffer.h@{susci/synchronization/buffer.h}}
\mbox{\hyperlink{buffer_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{/*}}
\DoxyCodeLine{2 \textcolor{comment}{ * This file is part of the Susci project, an ultra lightweight general purpose}}
\DoxyCodeLine{3 \textcolor{comment}{ * operating system aimed at devices without an MMU module and with very little}}
\DoxyCodeLine{4 \textcolor{comment}{ * RAM memory.}}
\DoxyCodeLine{5 \textcolor{comment}{ * }}
\DoxyCodeLine{6 \textcolor{comment}{ * It is released under the terms of the MIT license, you can use Susca in your}}
\DoxyCodeLine{7 \textcolor{comment}{ * projects, you just need to mention it in the documentation, manual or other }}
\DoxyCodeLine{8 \textcolor{comment}{ * such place.}}
\DoxyCodeLine{9 \textcolor{comment}{ * }}
\DoxyCodeLine{10 \textcolor{comment}{ * Author: Cixo}}
\DoxyCodeLine{11 \textcolor{comment}{ *}}
\DoxyCodeLine{12 \textcolor{comment}{ *}}
\DoxyCodeLine{13 \textcolor{comment}{ * This file stores declarations and definitions of data structures and }}
\DoxyCodeLine{14 \textcolor{comment}{ * functions responsibles for working with standard system Buffer.}}
\DoxyCodeLine{15 \textcolor{comment}{ */}}
\DoxyCodeLine{16 }
\DoxyCodeLine{17 \textcolor{preprocessor}{\#ifndef SYNCHRONIZATION\_BUFFER\_H\_INCLUDED}}
\DoxyCodeLine{18 \textcolor{preprocessor}{\#define SYNCHRONIZATION\_BUFFER\_H\_INCLUDED}}
\DoxyCodeLine{19 }
\DoxyCodeLine{23 \textcolor{preprocessor}{\#ifndef BUFFER\_SIZE}}
\DoxyCodeLine{24 \textcolor{preprocessor}{    \#define BUFFER\_SIZE 8}}
\DoxyCodeLine{25 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{26 }
\DoxyCodeLine{30 \textcolor{keyword}{typedef} \textcolor{keyword}{struct }\{}
\DoxyCodeLine{31     }
\DoxyCodeLine{32     \textcolor{comment}{/* Readed position in buffer */}}
\DoxyCodeLine{33     uint8\_t \mbox{\hyperlink{structbuffer__t_a537a59dd6d981bcecaf63d5aa807373a}{read\_position}};}
\DoxyCodeLine{34 }
\DoxyCodeLine{35     \textcolor{comment}{/* Writer position in buffer */}}
\DoxyCodeLine{36     uint8\_t \mbox{\hyperlink{structbuffer__t_af11157f06051b7ae5ad14a183a60263d}{write\_position}};}
\DoxyCodeLine{37 }
\DoxyCodeLine{38     \textcolor{comment}{/* Memory for buffer */}}
\DoxyCodeLine{39     \textcolor{keywordtype}{char} buffer[\mbox{\hyperlink{buffer_8h_a6b20d41d6252e9871430c242cb1a56e7}{BUFFER\_SIZE}}];}
\DoxyCodeLine{40 }
\DoxyCodeLine{41 \} \mbox{\hyperlink{structbuffer__t}{buffer\_t}};}
\DoxyCodeLine{42 }
\DoxyCodeLine{46 \textcolor{keyword}{static} \textcolor{keyword}{inline} \mbox{\hyperlink{structbuffer__t}{buffer\_t}} \mbox{\hyperlink{buffer_8h_ab84e064420b44e5aa85f3ad5fc2608e8}{create\_buffer}}() \{}
\DoxyCodeLine{47     \textcolor{keywordflow}{return} (\mbox{\hyperlink{structbuffer__t}{buffer\_t}}) \{0x00, 0x00, \{0x00\}\};}
\DoxyCodeLine{48 \}}
\DoxyCodeLine{49 }
\DoxyCodeLine{54 \textcolor{keyword}{static} \textcolor{keyword}{inline} \textcolor{keywordtype}{bool} \mbox{\hyperlink{buffer_8h_a2a8e655afd197aceb2c1017b755a3e83}{is\_buffer\_readable}}(\mbox{\hyperlink{structbuffer__t}{buffer\_t}} *buffer) \{}
\DoxyCodeLine{55     \textcolor{keywordflow}{return} (\textcolor{keywordtype}{bool}) (buffer-\/>\mbox{\hyperlink{structbuffer__t_a537a59dd6d981bcecaf63d5aa807373a}{read\_position}} < buffer-\/>\mbox{\hyperlink{structbuffer__t_af11157f06051b7ae5ad14a183a60263d}{write\_position}});}
\DoxyCodeLine{56 \}}
\DoxyCodeLine{57 }
\DoxyCodeLine{62 \textcolor{keyword}{static} \textcolor{keyword}{inline} \textcolor{keywordtype}{bool} \mbox{\hyperlink{buffer_8h_a3ebc0478f213715ebd5dba497674355e}{is\_buffer\_writable}}(\mbox{\hyperlink{structbuffer__t}{buffer\_t}} *buffer) \{}
\DoxyCodeLine{63     \textcolor{keywordflow}{return} (\textcolor{keywordtype}{bool}) (buffer-\/>\mbox{\hyperlink{structbuffer__t_af11157f06051b7ae5ad14a183a60263d}{write\_position}} <= \mbox{\hyperlink{buffer_8h_a6b20d41d6252e9871430c242cb1a56e7}{BUFFER\_SIZE}});}
\DoxyCodeLine{64 \}}
\DoxyCodeLine{65 }
\DoxyCodeLine{69 \textcolor{keyword}{static} \textcolor{keyword}{inline} \textcolor{keywordtype}{bool} \mbox{\hyperlink{buffer_8h_aee70db2dac9299174cfa056ddac9e8c6}{all\_data\_read\_from\_buffer}}(\mbox{\hyperlink{structbuffer__t}{buffer\_t}} *buffer) \{}
\DoxyCodeLine{70     \textcolor{keywordflow}{return} (\textcolor{keywordtype}{bool}) (buffer-\/>\mbox{\hyperlink{structbuffer__t_a537a59dd6d981bcecaf63d5aa807373a}{read\_position}} == buffer-\/>\mbox{\hyperlink{structbuffer__t_af11157f06051b7ae5ad14a183a60263d}{write\_position}});}
\DoxyCodeLine{71 \}}
\DoxyCodeLine{72 }
\DoxyCodeLine{76 \textcolor{keyword}{static} \textcolor{keyword}{inline} \textcolor{keywordtype}{void} \mbox{\hyperlink{buffer_8h_a4cc83ed13e3473991e7fbb43e669d41d}{reset\_buffer}}(\mbox{\hyperlink{structbuffer__t}{buffer\_t}} *buffer) \{}
\DoxyCodeLine{77     buffer-\/>\mbox{\hyperlink{structbuffer__t_a537a59dd6d981bcecaf63d5aa807373a}{read\_position}} = buffer-\/>\mbox{\hyperlink{structbuffer__t_af11157f06051b7ae5ad14a183a60263d}{write\_position}} = 0x00;}
\DoxyCodeLine{78 \}}
\DoxyCodeLine{79 }
\DoxyCodeLine{84 \textcolor{keyword}{static} \textcolor{keywordtype}{char} \mbox{\hyperlink{buffer_8h_afc14c9a996b991af4d4a272409bfa197}{read\_buffer}}(\mbox{\hyperlink{structbuffer__t}{buffer\_t}} *buffer) \{}
\DoxyCodeLine{85     \textcolor{keywordtype}{char} data = buffer-\/>\mbox{\hyperlink{structbuffer__t_ac082a90712df17f28451ecba315a99e6}{buffer}}[buffer-\/>\mbox{\hyperlink{structbuffer__t_a537a59dd6d981bcecaf63d5aa807373a}{read\_position}} ++];}
\DoxyCodeLine{86 }
\DoxyCodeLine{87     \textcolor{keywordflow}{if} (\mbox{\hyperlink{buffer_8h_aee70db2dac9299174cfa056ddac9e8c6}{all\_data\_read\_from\_buffer}}(buffer)) \mbox{\hyperlink{buffer_8h_a4cc83ed13e3473991e7fbb43e669d41d}{reset\_buffer}}(buffer);}
\DoxyCodeLine{88 }
\DoxyCodeLine{89     \textcolor{keywordflow}{return} data;}
\DoxyCodeLine{90 \}}
\DoxyCodeLine{91 }
\DoxyCodeLine{97 \textcolor{keyword}{static} \textcolor{keywordtype}{bool} \mbox{\hyperlink{buffer_8h_addeec2ccb4af48ce9fb96f17ebf2dd6e}{write\_buffer}}(\mbox{\hyperlink{structbuffer__t}{buffer\_t}} *buffer, \textcolor{keywordtype}{char} data) \{}
\DoxyCodeLine{98     \textcolor{keywordflow}{if} (!\mbox{\hyperlink{buffer_8h_a3ebc0478f213715ebd5dba497674355e}{is\_buffer\_writable}}(buffer)) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{99     }
\DoxyCodeLine{100     buffer-\/>\mbox{\hyperlink{structbuffer__t_ac082a90712df17f28451ecba315a99e6}{buffer}}[buffer-\/>\mbox{\hyperlink{structbuffer__t_af11157f06051b7ae5ad14a183a60263d}{write\_position}} ++] = data;}
\DoxyCodeLine{101     }
\DoxyCodeLine{102     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{103 \}}
\DoxyCodeLine{104 }
\DoxyCodeLine{105 \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
